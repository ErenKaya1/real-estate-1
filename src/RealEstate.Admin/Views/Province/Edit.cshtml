@model src.RealEstate.Admin.Models.Province.ProvinceEditViewModel

@{
    ViewData["Title"] = "İl Düzenle";
}

@if (TempData["EditProvinceMessage"] != null)
{
    <div class="alert alert-info"><b>@TempData["EditProvinceMessage"]</b></div>
}

<div class="card mb-4">
    <h6 class="card-header">
        İl Düzenle
    </h6>
    <div class="card-body">
        <form asp-controller="Province" asp-action="Edit" method="POST" class="editprovince-form">
            <input type="hidden" asp-for="Id" />
            <div class="form-group">
                <label asp-for="NameTR" class="form-label"></label>
                <input asp-for="NameTR" class="form-control">
            </div>
            <div class="form-group">
                <label asp-for="NameEN" class="form-label"></label>
                <input asp-for="NameEN" class="form-control">
            </div>
            <button type="submit" class="btn btn-admin-primary">Kaydet</button>
            <a href="javascript:void(0)" class="btn btn-danger" onclick="deleteProvinceConfirm('@Model.Id')">Sil</a>
            <a asp-controller="Province" asp-action="List" class="back-link">Listeye Dön</a>
        </form>
    </div>
</div>

@if (TempData["NewDistrictMessage"] != null)
{
    <div class="alert alert-success"><b>@TempData["NewDistrictMessage"]</b></div>
}

@if (TempData["NewDistrictError"] != null)
{
    <div class="alert alert-danger"><b>@TempData["NewDistrictError"]</b></div>
}

@if (TempData["DistrictNotFound"] != null)
{
    <div class="alert alert-danger"><b>@TempData["DistrictNotFound"]</b></div>
}

@if (TempData["DeleteDistrictMessage"] != null)
{
    <div class="alert alert-info"><b>@TempData["DeleteDistrictMessage"]</b></div>
}

@if (TempData["DeleteDistrictError"] != null)
{
    <div class="alert alert-danger"><b>@TempData["DeleteDistrictError"]</b></div>
}

@if (TempData["DistrictIsUseError"] != null)
{
    <div class="alert alert-danger"><b>@TempData["DistrictIsUseError"]</b></div>
}

@if (Model.Districts.Count == 0)
{
    <div class="alert alert-warning"><b>@Model.NameTR şehri için henüz ilçe eklemediniz.</b></div>
}
else
{
    <h4 class="font-weight-bold py-3 mb-4">@Model.NameTR Şehrine Ait İlçeler</h4>

    <div class="table-responsive">
        <table class="table table-striped table-bordered list-table">
            <thead>
                <tr>
                    <th class="sort-column"></th>
                    <th>Türkçe</th>
                    <th>İngilizce</th>
                    <th class="options-column">Seçenekler</th>
                </tr>
            </thead>
            <tbody>
                @for (int i = 0; i < Model.Districts.Count; i++)
                {
                    <tr>
                        <td class="sort-column">@(i+1)</td>
                        <td>@Model.Districts[i].DistrictNameTR</td>
                        <td>@Model.Districts[i].DistrictNameEN</td>
                        <td class="options-column">
                            <a asp-controller="District" asp-action="Edit" asp-route-provinceId="@Model.Id"
                                asp-route-districtId="@Model.Districts[i].Id" class="badge badge-info">Düzenle</a>
                            <a href="javascript:void(0)" class="badge badge-danger"
                                onclick="deleteDistrictConfirm('@Model.Id', '@Model.Districts[i].Id')">Sil</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}

<div class="card mb-4 mt-5">
    <h6 class="card-header">
        @Model.NameTR İçin İlçe Ekle
    </h6>
    <div class="card-body">
        <form asp-controller="District" asp-action="New" method="POST" class="district-form">
            <input type="hidden" asp-for="Id" />
            <div class="form-group">
                <label asp-for="DistrictNameTR" class="form-label"></label>
                <input asp-for="DistrictNameTR" class="form-control" placeholder="Kadıköy">
            </div>
            <div class="form-group">
                <label asp-for="DistrictNameEN" class="form-label"></label>
                <input asp-for="DistrictNameEN" class="form-control" placeholder="Kadikoy">
            </div>
            <button type="submit" class="btn btn-admin-primary">Yeni İlçe Ekle</button>
        </form>
    </div>
</div>

@section Styles{
    <link rel="stylesheet" href="/assets/vendor/libs/datatables/datatables.css">
    <link rel="stylesheet" href="/assets/vendor/libs/sweetalert2/sweetalert2.css">
}

@section Scripts{
    <script src="/assets/vendor/libs/datatables/datatables.js"></script>
    <script src="/assets/vendor/libs/sweetalert2/sweetalert2.js"></script>
    <script src="/assets/js/dataTables.js"></script>
}